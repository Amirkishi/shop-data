<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙØ±ÙˆØ´Ú¯Ø§Ù‡ - Ù†Ø³Ø®Ù‡ Ú©Ø§Ù…Ù„ Ø¨Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§</title>
    <style>
        /* Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ¨Ø§ Ùˆ Ú©Ø§Ù…Ù„ */
        :root {
            --primary-blue: #1a73e8;
            --dark-blue: #0d47a1;
            --light-blue: #e8f0fe;
            --white: #ffffff;
            --black: #202124;
            --gray: #5f6368;
            --light-gray: #f8f9fa;
            --border-gray: #dadce0;
            --success: #34a853;
            --error: #ea4335;
            --warning: #fbbc04;
            --purple: #8e24aa;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        /* Tabs */
        .tabs {
            display: flex;
            background: var(--white);
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
        }

        .tab-btn {
            flex: 1;
            padding: 18px;
            border: none;
            background: none;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            color: var(--gray);
            transition: all 0.3s;
            position: relative;
        }

        .tab-btn.active {
            color: var(--primary-blue);
            background: var(--light-blue);
            border-bottom: 3px solid var(--primary-blue);
        }

        .tab-btn:hover:not(.active) {
            background: rgba(26, 115, 232, 0.05);
        }

        /* Tab Content */
        .tab-content {
            display: none;
            background: var(--white);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            animation: fadeIn 0.5s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Product Cards */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .product-card {
            background: linear-gradient(135deg, var(--white) 0%, #f8f9fa 100%);
            border-radius: 12px;
            padding: 20px;
            border: 2px solid var(--border-gray);
            transition: all 0.3s;
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            border-color: var(--primary-blue);
        }

        .product-card.selected {
            border-color: var(--primary-blue);
            background: var(--light-blue);
        }

        .product-card h3 {
            color: var(--primary-blue);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        /* Input Groups */
        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--gray);
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-gray);
            border-radius: 8px;
            font-size: 15px;
            transition: all 0.3s;
        }

        .input-group input:focus,
        .input-group select:focus {
            outline: none;
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 3px rgba(26, 115, 232, 0.2);
        }

        /* Buttons */
        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-blue), var(--dark-blue));
            color: white;
        }

        .btn-primary:hover {
            background: linear-gradient(135deg, var(--dark-blue), #0a356a);
            transform: translateY(-2px);
            box-shadow: 0 7px 20px rgba(26, 115, 232, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #2d8c47);
            color: white;
        }

        .btn-success:hover {
            background: linear-gradient(135deg, #2d8c47, #246c3a);
            transform: translateY(-2px);
            box-shadow: 0 7px 20px rgba(52, 168, 83, 0.3);
        }

        .btn-block {
            width: 100%;
            padding: 16px;
            font-size: 16px;
        }

        /* Price Display */
        .price-display {
            background: linear-gradient(135deg, #e8f0fe, #d4e2fc);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            border: 3px dashed var(--primary-blue);
            position: relative;
            overflow: hidden;
        }

        .final-price {
            font-size: 3.5rem;
            font-weight: 800;
            color: var(--dark-blue);
            margin: 20px 0;
        }

        /* Table */
        .price-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .price-table th {
            background: linear-gradient(135deg, var(--primary-blue), var(--dark-blue));
            color: white;
            padding: 16px;
            font-weight: 600;
            text-align: center;
        }

        .price-table td {
            padding: 14px;
            border: 1px solid var(--border-gray);
            text-align: center;
            background: var(--white);
        }

        .price-table tr:nth-child(even) td {
            background: var(--light-gray);
        }

        .price-table input {
            width: 120px;
            padding: 10px;
            border: 2px solid var(--border-gray);
            border-radius: 6px;
            text-align: center;
        }

        /* Notification */
        .notification {
            position: fixed;
            bottom: 30px;
            right: 30px;
            padding: 20px 25px;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            opacity: 0;
            transform: translateX(100px);
            transition: all 0.5s;
            min-width: 300px;
        }

        .notification.show {
            opacity: 1;
            transform: translateX(0);
        }

        .notification.success {
            background: linear-gradient(135deg, var(--success), #2d8c47);
        }

        .notification.error {
            background: linear-gradient(135deg, var(--error), #d23f31);
        }

        /* GitHub Section */
        .github-section {
            background: #24292e;
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
        }

        .input-row {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .input-row input {
            flex: 1;
            min-width: 200px;
            padding: 12px 15px;
            border: 2px solid #444;
            border-radius: 8px;
            background: #1a1e22;
            color: white;
        }

        /* Footer */
        footer {
            text-align: center;
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.7);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .product-grid {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .final-price {
                font-size: 2.5rem;
            }
            
            .input-row {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>ğŸ›’ Ù…Ø¯ÛŒØ±ÛŒØª Ù‡ÙˆØ´Ù…Ù†Ø¯ ÙØ±ÙˆØ´Ú¯Ø§Ù‡</h1>
            <p>Ù‡Ù…Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ú©Ø§Ù…Ù„ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯</p>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab-btn active" data-tab="calculate">ğŸ“Š Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª</button>
            <button class="tab-btn" data-tab="products">ğŸ“¦ Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø­ØµÙˆÙ„Ø§Øª</button>
            <button class="tab-btn" data-tab="prices">ğŸ’° Ù…Ø¯ÛŒØ±ÛŒØª Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§</button>
            <button class="tab-btn" data-tab="sync">ğŸ”„ Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ</button>
        </div>

        <!-- Tab 1: Calculate Price -->
        <div id="calculate" class="tab-content active">
            <h2 style="color: var(--dark-blue); margin-bottom: 25px; border-bottom: 2px solid var(--light-blue); padding-bottom: 10px;">
                Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª Ù…Ø­ØµÙˆÙ„Ø§Øª
            </h2>
            
            <div class="product-grid" id="productGrid">
                <!-- Ù…Ø­ØµÙˆÙ„Ø§Øª Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
            </div>
            
            <div class="price-display">
                <h3 style="color: var(--dark-blue); margin-bottom: 15px;">ğŸ’° Ù‚ÛŒÙ…Øª Ù†Ù‡Ø§ÛŒÛŒ</h3>
                <div class="final-price">
                    <span id="finalPrice">0</span>
                    <span>ØªÙˆÙ…Ø§Ù†</span>
                </div>
                <p id="priceDetails" style="color: var(--gray); margin: 15px 0;">Ù…Ø­ØµÙˆÙ„ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</p>
                <button onclick="calculatePrice()" class="btn btn-primary btn-block">
                    ğŸ§® Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª
                </button>
            </div>
        </div>

        <!-- Tab 2: Manage Products -->
        <div id="products" class="tab-content">
            <h2 style="color: var(--dark-blue); margin-bottom: 25px; border-bottom: 2px solid var(--light-blue); padding-bottom: 10px;">
                Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø­ØµÙˆÙ„Ø§Øª
            </h2>
            
            <!-- Form to add product -->
            <div style="background: var(--light-gray); padding: 25px; border-radius: 12px; margin-bottom: 30px;">
                <h3 style="color: var(--primary-blue); margin-bottom: 20px;">â• Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø­ØµÙˆÙ„ Ø¬Ø¯ÛŒØ¯</h3>
                
                <div class="input-group">
                    <label>Ù†Ø§Ù… Ù…Ø­ØµÙˆÙ„:</label>
                    <input type="text" id="productName" placeholder="Ù…Ø«Ø§Ù„: Ù…ÛŒØ² Ù†Ø§Ù‡Ø§Ø±Ø®ÙˆØ±ÛŒ">
                </div>
                
                <div class="input-group">
                    <label>Ù†ÙˆØ¹ ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§:</label>
                    <div style="display: flex; gap: 20px; margin-top: 10px;">
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="inputLength" value="length">
                            Ø·ÙˆÙ„
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="inputWidth" value="width">
                            Ø¹Ø±Ø¶
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px;">
                            <input type="checkbox" id="inputCount" value="count">
                            ØªØ¹Ø¯Ø§Ø¯
                        </label>
                    </div>
                </div>
                
                <div class="input-group">
                    <label>Ø¬Ù†Ø³â€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„:</label>
                    <div id="materialsContainer" style="margin-top: 10px;">
                        <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                            <input type="checkbox" class="material-check" value="MDF" checked>
                            MDF
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                            <input type="checkbox" class="material-check" value="Ù…Ù„Ø§Ù…ÛŒÙ†Ù‡" checked>
                            Ù…Ù„Ø§Ù…ÛŒÙ†Ù‡
                        </label>
                        <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                            <input type="checkbox" class="material-check" value="Ø±Ù†Ú¯" checked>
                            Ø±Ù†Ú¯
                        </label>
                        <div id="customMaterialsList"></div>
                    </div>
                    
                    <div style="display: flex; gap: 10px; margin-top: 15px;">
                        <input type="text" id="newMaterialInput" placeholder="Ø¬Ù†Ø³ Ø¬Ø¯ÛŒØ¯ (Ù…Ø«Ø§Ù„: Ú†ÙˆØ¨)" style="flex: 1;">
                        <button onclick="addNewMaterial()" class="btn btn-primary">
                            â• Ø§ÙØ²ÙˆØ¯Ù† Ø¬Ù†Ø³
                        </button>
                    </div>
                </div>
                
                <button onclick="addProduct()" class="btn btn-success btn-block" style="margin-top: 20px;">
                    âœ… Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø­ØµÙˆÙ„ Ø¬Ø¯ÛŒØ¯
                </button>
            </div>
            
            <!-- Products List -->
            <div id="productsList">
                <h3 style="color: var(--dark-blue); margin-bottom: 20px;">ğŸ“‹ Ù„ÛŒØ³Øª Ù…Ø­ØµÙˆÙ„Ø§Øª</h3>
                <!-- Ù„ÛŒØ³Øª Ù…Ø­ØµÙˆÙ„Ø§Øª Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
            </div>
        </div>

        <!-- Tab 3: Manage Prices -->
        <div id="prices" class="tab-content">
            <h2 style="color: var(--dark-blue); margin-bottom: 25px; border-bottom: 2px solid var(--light-blue); padding-bottom: 10px;">
                Ù…Ø¯ÛŒØ±ÛŒØª Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§
            </h2>
            
            <p style="color: var(--gray); margin-bottom: 20px;">Ù‚ÛŒÙ…Øª Ù‡Ø± Ù…Ø­ØµÙˆÙ„ Ø±Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¬Ù†Ø³ Ø¢Ù† ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯:</p>
            
            <div style="overflow-x: auto;">
                <table class="price-table" id="priceTable">
                    <!-- Ø¬Ø¯ÙˆÙ„ Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ -->
                </table>
            </div>
            
            <div style="display: flex; gap: 15px; margin-top: 25px;">
                <button onclick="saveAllPrices()" class="btn btn-success">
                    ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ Ù‡Ù…Ù‡ ØªØºÛŒÛŒØ±Ø§Øª
                </button>
                <button onclick="loadPricesFromLocal()" class="btn btn-primary">
                    ğŸ”„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯
                </button>
            </div>
        </div>

        <!-- Tab 4: Sync -->
        <div id="sync" class="tab-content">
            <h2 style="color: var(--dark-blue); margin-bottom: 25px; border-bottom: 2px solid var(--light-blue); padding-bottom: 10px;">
                Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§ GitHub
            </h2>
            
            <div class="github-section">
                <div class="input-row">
                    <input type="text" id="repoOwner" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ GitHub" value="">
                    <input type="text" id="repoName" placeholder="Ù†Ø§Ù… Ø±ÛŒÙ¾Ø§Ø²ÛŒØªÙˆØ±ÛŒ" value="shop-data">
                </div>
                
                <div class="input-row">
                    <input type="password" id="githubToken" placeholder="GitHub Personal Access Token">
                    <button onclick="saveGitHubConfig()" class="btn btn-success">ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª</button>
                </div>
                
                <div style="margin: 25px 0; padding: 20px; background: rgba(255, 255, 255, 0.1); border-radius: 10px;">
                    <h4 style="color: #58a6ff; margin-bottom: 15px;">ğŸ“– Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø³Ø±ÛŒØ¹:</h4>
                    <ol style="line-height: 1.8; padding-right: 20px;">
                        <li>ØªÙˆÚ©Ù† GitHub Ø±Ø§ Ø§Ø² <a href="https://github.com/settings/tokens" target="_blank" style="color: #58a6ff;">Ø§ÛŒÙ†Ø¬Ø§</a> Ø¨Ø³Ø§Ø²ÛŒØ¯</li>
                        <li>Ø¯Ø³ØªØ±Ø³ÛŒ <strong>âœ… repo</strong> Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</li>
                        <li>Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ùˆ Ø±ÛŒÙ¾Ø§Ø²ÛŒØªÙˆØ±ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯</li>
                        <li>Ø±ÙˆÛŒ "Ø°Ø®ÛŒØ±Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª" Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯</li>
                    </ol>
                </div>
                
                <div id="statusBox" style="margin: 20px 0; padding: 15px; border-radius: 8px; background: rgba(255, 255, 255, 0.1); display: none;">
                    <pre id="statusText" style="color: #ddd; font-family: monospace; font-size: 14px; white-space: pre-wrap;"></pre>
                </div>
                
                <div style="display: flex; gap: 15px; margin-top: 25px; flex-wrap: wrap;">
                    <button onclick="testGitHubConnection()" class="btn" style="background: #fbbc04; color: white;">
                        ğŸ” ØªØ³Øª Ø§ØªØµØ§Ù„
                    </button>
                    <button onclick="syncToGitHub()" class="btn btn-primary">
                        â˜ï¸ Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§ GitHub
                    </button>
                    <button onclick="loadFromGitHub()" class="btn btn-success">
                        ğŸ“¥ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø² GitHub
                    </button>
                    <button onclick="exportLocalBackup()" class="btn" style="background: #8e24aa; color: white;">
                        ğŸ“„ Ø¯Ø±ÛŒØ§ÙØª Ù¾Ø´ØªÛŒØ¨Ø§Ù†
                    </button>
                </div>
            </div>
            
            <!-- Data Preview -->
            <div style="margin-top: 30px; padding: 20px; background: var(--light-gray); border-radius: 12px;">
                <h3 style="color: var(--dark-blue); margin-bottom: 15px;">ğŸ‘ï¸ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§</h3>
                <pre id="dataPreview" style="background: white; padding: 15px; border-radius: 8px; border: 1px solid var(--border-gray); max-height: 300px; overflow: auto; font-size: 14px;">
                    Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯...
                </pre>
                <button onclick="refreshDataPreview()" class="btn" style="margin-top: 15px; background: var(--light-blue); color: var(--dark-blue);">
                    ğŸ”„ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´
                </button>
            </div>
        </div>

        <!-- Notification -->
        <div id="notification" class="notification"></div>

        <!-- Footer -->
        <footer>
            <p>ğŸ›’ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª ÙØ±ÙˆØ´Ú¯Ø§Ù‡ | Ù‡Ù…Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¨Ù‡ Ø·ÙˆØ± Ú©Ø§Ù…Ù„ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯</p>
            <p>Â© Û±Û´Û°Û³ - Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ø­ØµÙˆÙ„Ø§ØªØŒ Ø¨Ù‡ ØªØ¨ "Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª" Ø¨Ø±ÙˆÛŒØ¯</p>
        </footer>
    </div>

    <script>
        // ==================== Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ ====================
        let shopData = {
            products: [],
            prices: {},
            customMaterials: [],
            lastSync: null
        };

        let githubConfig = {
            token: '',
            repoOwner: '',
            repoName: 'shop-data',
            branch: 'main'
        };

        let selectedProduct = null;
        let selectedMaterial = 'MDF';

        // ==================== Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ ====================
        function init() {
            loadAllData();
            setupEventListeners();
            renderAll();
            
            showNotification('Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª! Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¨Ù‡ ØªØ¨ "Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª" Ø¨Ø±ÙˆÛŒØ¯', 'success');
        }

        function loadAllData() {
            try {
                // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ±ÙˆØ´Ú¯Ø§Ù‡
                const savedShopData = localStorage.getItem('shopData');
                if (savedShopData) {
                    shopData = JSON.parse(savedShopData);
                } else {
                    // Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´â€ŒÙØ±Ø¶
                    shopData = {
                        products: [
                            {
                                id: 1,
                                name: 'Ú©Ù…Ø¯',
                                inputs: ['Ø·ÙˆÙ„ (Ø³Ø§Ù†ØªÛŒâ€ŒÙ…ØªØ±)', 'Ø¹Ø±Ø¶ (Ø³Ø§Ù†ØªÛŒâ€ŒÙ…ØªØ±)'],
                                materials: ['MDF', 'Ù…Ù„Ø§Ù…ÛŒÙ†Ù‡', 'Ø±Ù†Ú¯']
                            },
                            {
                                id: 2,
                                name: 'Ù…ÛŒØ² ØªØ­Ø±ÛŒØ±',
                                inputs: ['Ø·ÙˆÙ„ (Ø³Ø§Ù†ØªÛŒâ€ŒÙ…ØªØ±)', 'Ø¹Ø±Ø¶ (Ø³Ø§Ù†ØªÛŒâ€ŒÙ…ØªØ±)'],
                                materials: ['MDF', 'Ù…Ù„Ø§Ù…ÛŒÙ†Ù‡', 'Ø±Ù†Ú¯']
                            }
                        ],
                        prices: {
                            'Ú©Ù…Ø¯': { 'MDF': 150000, 'Ù…Ù„Ø§Ù…ÛŒÙ†Ù‡': 180000, 'Ø±Ù†Ú¯': 220000 },
                            'Ù…ÛŒØ² ØªØ­Ø±ÛŒØ±': { 'MDF': 130000, 'Ù…Ù„Ø§Ù…ÛŒÙ†Ù‡': 160000, 'Ø±Ù†Ú¯': 200000 }
                        },
                        customMaterials: [],
                        lastSync: null
                    };
                    saveShopData();
                }
                
                // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª GitHub
                const savedGitHubConfig = localStorage.getItem('githubConfig');
                if (savedGitHubConfig) {
                    githubConfig = JSON.parse(savedGitHubConfig);
                    document.getElementById('repoOwner').value = githubConfig.repoOwner || '';
                    document.getElementById('repoName').value = githubConfig.repoName || 'shop-data';
                    document.getElementById('githubToken').value = githubConfig.token ? 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢' : '';
                }
                
            } catch (error) {
                console.error('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§:', error);
                showNotification('Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§', 'error');
            }
        }

        function saveShopData() {
            localStorage.setItem('shopData', JSON.stringify(shopData));
            refreshDataPreview();
        }

        // ==================== Ø±Ù†Ø¯Ø± Ù‡Ù…Ù‡ Ø¨Ø®Ø´â€ŒÙ‡Ø§ ====================
        function renderAll() {
            renderProductCards();     // ØªØ¨ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª
            renderProductsList();     // ØªØ¨ Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø­ØµÙˆÙ„Ø§Øª
            renderPriceTable();       // ØªØ¨ Ù…Ø¯ÛŒØ±ÛŒØª Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§
            renderCustomMaterials();  // Ø¬Ù†Ø³â€ŒÙ‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ
            refreshDataPreview();     // Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
        }

        // 1. Ø±Ù†Ø¯Ø± Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø­ØµÙˆÙ„Ø§Øª (ØªØ¨ Ù…Ø­Ø§Ø³Ø¨Ù‡)
        function renderProductCards() {
            const container = document.getElementById('productGrid');
            if (!container) return;
            
            container.innerHTML = '';
            
            if (shopData.products.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--gray); grid-column: 1 / -1;">
                        <p>Ù‡Ù†ÙˆØ² Ù…Ø­ØµÙˆÙ„ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</p>
                        <p>Ø¨Ù‡ ØªØ¨ "Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø­ØµÙˆÙ„Ø§Øª" Ø¨Ø±ÙˆÛŒØ¯ Ùˆ Ù…Ø­ØµÙˆÙ„ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯</p>
                    </div>
                `;
                return;
            }
            
            shopData.products.forEach(product => {
                const card = document.createElement('div');
                card.className = 'product-card';
                if (selectedProduct === product.name) {
                    card.classList.add('selected');
                }
                
                card.innerHTML = `
                    <h3>${product.name}</h3>
                    <div class="input-group">
                        <label>Ø¬Ù†Ø³ Ù…Ø­ØµÙˆÙ„:</label>
                        <select class="material-select" onchange="updateSelectedMaterial('${product.name}', this.value)">
                            ${product.materials.map(m => 
                                `<option value="${m}" ${selectedMaterial === m ? 'selected' : ''}>${m}</option>`
                            ).join('')}
                        </select>
                    </div>
                    ${product.inputs.map(input => `
                        <div class="input-group">
                            <label>${input}:</label>
                            <input type="number" min="1" placeholder="Ø¹Ø¯Ø¯ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯" class="dimension-input" 
                                   data-product="${product.name}" onkeypress="handleEnterKey(event, '${product.name}')">
                        </div>
                    `).join('')}
                    <button onclick="selectProduct('${product.name}')" class="btn btn-primary btn-block">
                        ğŸ¯ Ø§Ù†ØªØ®Ø§Ø¨ Ø§ÛŒÙ† Ù…Ø­ØµÙˆÙ„
                    </button>
                `;
                
                container.appendChild(card);
            });
        }

        // 2. Ø±Ù†Ø¯Ø± Ù„ÛŒØ³Øª Ù…Ø­ØµÙˆÙ„Ø§Øª (ØªØ¨ Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø­ØµÙˆÙ„Ø§Øª)
        function renderProductsList() {
            const container = document.getElementById('productsList');
            if (!container) return;
            
            if (shopData.products.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 30px; color: var(--gray);">
                        <p>ğŸ“­ Ù‡Ù†ÙˆØ² Ù…Ø­ØµÙˆÙ„ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯</p>
                        <p>ÙØ±Ù… Ø¨Ø§Ù„Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯ ØªØ§ Ù…Ø­ØµÙˆÙ„ Ø§ÙˆÙ„ Ø±Ø§ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯</p>
                    </div>
                `;
                return;
            }
            
            let html = '<div style="display: flex; flex-wrap: wrap; gap: 15px;">';
            
            shopData.products.forEach(product => {
                html += `
                    <div style="background: white; padding: 20px; border-radius: 10px; border: 2px solid var(--border-gray); flex: 1; min-width: 250px;">
                        <h4 style="color: var(--primary-blue); margin-bottom: 10px;">${product.name}</h4>
                        <p style="color: var(--gray); margin-bottom: 8px;">ğŸ“ ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§: ${product.inputs.join('ØŒ ')}</p>
                        <p style="color: var(--gray); margin-bottom: 15px;">ğŸ¨ Ø¬Ù†Ø³â€ŒÙ‡Ø§: ${product.materials.join('ØŒ ')}</p>
                        <button onclick="deleteProduct(${product.id})" class="btn" style="background: var(--error); color: white; width: 100%;">
                            ğŸ—‘ï¸ Ø­Ø°Ù Ù…Ø­ØµÙˆÙ„
                        </button>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }

        // 3. Ø±Ù†Ø¯Ø± Ø¬Ø¯ÙˆÙ„ Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§
        function renderPriceTable() {
            const table = document.getElementById('priceTable');
            if (!table) return;
            
            if (shopData.products.length === 0) {
                table.innerHTML = `
                    <tr>
                        <td colspan="10" style="text-align: center; padding: 40px; color: var(--gray);">
                            Ù…Ø­ØµÙˆÙ„ÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ù‚ÛŒÙ…Øª ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯
                        </td>
                    </tr>
                `;
                return;
            }
            
            // Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ù‡Ù…Ù‡ Ø¬Ù†Ø³â€ŒÙ‡Ø§
            const allMaterials = new Set();
            shopData.products.forEach(p => p.materials.forEach(m => allMaterials.add(m)));
            shopData.customMaterials.forEach(m => allMaterials.add(m));
            const materials = Array.from(allMaterials);
            
            let html = `
                <thead>
                    <tr>
                        <th>Ù…Ø­ØµÙˆÙ„</th>
                        ${materials.map(m => `<th>${m}</th>`).join('')}
                    </tr>
                </thead>
                <tbody>
            `;
            
            shopData.products.forEach(product => {
                html += `<tr><td><strong>${product.name}</strong></td>`;
                
                materials.forEach(material => {
                    if (product.materials.includes(material)) {
                        const price = shopData.prices[product.name]?.[material] || 0;
                        html += `
                            <td>
                                <input type="number" value="${price}" 
                                       onchange="updateProductPrice('${product.name}', '${material}', this.value)"
                                       style="width: 120px;">
                            </td>
                        `;
                    } else {
                        html += '<td style="color: var(--gray);">-</td>';
                    }
                });
                
                html += '</tr>';
            });
            
            html += '</tbody>';
            table.innerHTML = html;
        }

        // 4. Ø±Ù†Ø¯Ø± Ø¬Ù†Ø³â€ŒÙ‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ
        function renderCustomMaterials() {
            const container = document.getElementById('customMaterialsList');
            if (!container) return;
            
            container.innerHTML = '';
            shopData.customMaterials.forEach(material => {
                const label = document.createElement('label');
                label.style.cssText = 'display: flex; align-items: center; gap: 8px; margin-bottom: 8px;';
                label.innerHTML = `
                    <input type="checkbox" class="material-check" value="${material}" checked>
                    ${material}
                `;
                container.appendChild(label);
            });
        }

        // 5. Ù¾ÛŒØ´â€ŒÙ†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
        function refreshDataPreview() {
            const preview = document.getElementById('dataPreview');
            if (preview) {
                preview.textContent = JSON.stringify(shopData, null, 2);
            }
        }

        // ==================== ØªÙˆØ§Ø¨Ø¹ Ù…Ø­ØµÙˆÙ„Ø§Øª ====================
        function selectProduct(productName) {
            selectedProduct = productName;
            const card = document.querySelector(`[data-product="${productName}"]`);
            if (card) {
                const materialSelect = card.querySelector('.material-select');
                selectedMaterial = materialSelect ? materialSelect.value : 'MDF';
            }
            renderProductCards();
            showNotification(`"${productName}" Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯`);
        }

        function updateSelectedMaterial(productName, material) {
            if (selectedProduct === productName) {
                selectedMaterial = material;
            }
        }

        function handleEnterKey(event, productName) {
            if (event.key === 'Enter') {
                selectProduct(productName);
                calculatePrice();
            }
        }

        function addProduct() {
            const nameInput = document.getElementById('productName');
            const productName = nameInput.value.trim();
            
            if (!productName) {
                showNotification('Ù„Ø·ÙØ§ Ù†Ø§Ù… Ù…Ø­ØµÙˆÙ„ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            
            // Ø¨Ø±Ø±Ø³ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ Ù†Ø¨ÙˆØ¯Ù†
            if (shopData.products.some(p => p.name === productName)) {
                showNotification('Ø§ÛŒÙ† Ù…Ø­ØµÙˆÙ„ Ù‚Ø¨Ù„Ø§Ù‹ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯', 'error');
                return;
            }
            
            // Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§
            const inputs = [];
            if (document.getElementById('inputLength').checked) inputs.push('Ø·ÙˆÙ„ (Ø³Ø§Ù†ØªÛŒâ€ŒÙ…ØªØ±)');
            if (document.getElementById('inputWidth').checked) inputs.push('Ø¹Ø±Ø¶ (Ø³Ø§Ù†ØªÛŒâ€ŒÙ…ØªØ±)');
            if (document.getElementById('inputCount').checked) inputs.push('ØªØ¹Ø¯Ø§Ø¯');
            
            if (inputs.length === 0) {
                showNotification('Ù„Ø·ÙØ§ Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ© Ù†ÙˆØ¹ ÙˆØ±ÙˆØ¯ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            
            // Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ø¬Ù†Ø³â€ŒÙ‡Ø§
            const materials = [];
            document.querySelectorAll('.material-check:checked').forEach(cb => {
                materials.push(cb.value);
            });
            
            if (materials.length === 0) {
                showNotification('Ù„Ø·ÙØ§ Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ© Ø¬Ù†Ø³ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            
            // Ø§ÛŒØ¬Ø§Ø¯ Ù…Ø­ØµÙˆÙ„ Ø¬Ø¯ÛŒØ¯
            const newProduct = {
                id: Date.now(),
                name: productName,
                inputs: inputs,
                materials: materials
            };
            
            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¨Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
            shopData.products.push(newProduct);
            
            // Ø§ÛŒØ¬Ø§Ø¯ Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´â€ŒÙØ±Ø¶
            if (!shopData.prices[productName]) {
                shopData.prices[productName] = {};
                materials.forEach(material => {
                    shopData.prices[productName][material] = 100000;
                });
            }
            
            // Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ø±Ù†Ø¯Ø± Ù…Ø¬Ø¯Ø¯
            saveShopData();
            renderAll();
            
            // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ÙØ±Ù…
            nameInput.value = '';
            document.getElementById('inputLength').checked = false;
            document.getElementById('inputWidth').checked = false;
            document.getElementById('inputCount').checked = false;
            
            showNotification(`Ù…Ø­ØµÙˆÙ„ "${productName}" Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯`);
        }

        function deleteProduct(productId) {
            const productIndex = shopData.products.findIndex(p => p.id === productId);
            if (productIndex === -1) return;
            
            const productName = shopData.products[productIndex].name;
            
            if (confirm(`Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ "${productName}" Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒØ¯ØŸ`)) {
                // Ø­Ø°Ù Ù…Ø­ØµÙˆÙ„
                shopData.products.splice(productIndex, 1);
                
                // Ø­Ø°Ù Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ·Ù‡
                if (shopData.prices[productName]) {
                    delete shopData.prices[productName];
                }
                
                // Ø§Ú¯Ø± Ù…Ø­ØµÙˆÙ„ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ Ø¨ÙˆØ¯ØŒ Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø§Ù†ØªØ®Ø§Ø¨
                if (selectedProduct === productName) {
                    selectedProduct = null;
                }
                
                saveShopData();
                renderAll();
                showNotification(`Ù…Ø­ØµÙˆÙ„ "${productName}" Ø­Ø°Ù Ø´Ø¯`, 'success');
            }
        }

        function addNewMaterial() {
            const input = document.getElementById('newMaterialInput');
            const materialName = input.value.trim();
            
            if (!materialName) {
                showNotification('Ù„Ø·ÙØ§ Ù†Ø§Ù… Ø¬Ù†Ø³ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            
            if (shopData.customMaterials.includes(materialName)) {
                showNotification('Ø§ÛŒÙ† Ø¬Ù†Ø³ Ù‚Ø¨Ù„Ø§Ù‹ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯Ù‡ Ø§Ø³Øª', 'error');
                return;
            }
            
            shopData.customMaterials.push(materialName);
            saveShopData();
            renderCustomMaterials();
            
            input.value = '';
            showNotification(`Ø¬Ù†Ø³ "${materialName}" Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯`);
        }

        // ==================== ØªÙˆØ§Ø¨Ø¹ Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§ ====================
        function updateProductPrice(product, material, value) {
            if (!shopData.prices[product]) {
                shopData.prices[product] = {};
            }
            shopData.prices[product][material] = parseInt(value) || 0;
        }

        function saveAllPrices() {
            saveShopData();
            showNotification('Ù‡Ù…Ù‡ Ù‚ÛŒÙ…Øªâ€ŒÙ‡Ø§ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù†Ø¯', 'success');
        }

        function loadPricesFromLocal() {
            loadAllData();
            renderAll();
            showNotification('Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯ Ø´Ø¯Ù†Ø¯', 'success');
        }

        // ==================== Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª ====================
        function calculatePrice() {
            if (!selectedProduct) {
                showNotification('Ù„Ø·ÙØ§ Ø§Ø¨ØªØ¯Ø§ ÛŒÚ© Ù…Ø­ØµÙˆÙ„ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            
            const product = shopData.products.find(p => p.name === selectedProduct);
            if (!product) {
                showNotification('Ù…Ø­ØµÙˆÙ„ ÛŒØ§ÙØª Ù†Ø´Ø¯', 'error');
                return;
            }
            
            // Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ú©Ø§Ø±Øª Ù…Ø­ØµÙˆÙ„
            const card = document.querySelector(`.product-card.selected`);
            if (!card) {
                showNotification('Ø®Ø·Ø§ Ø¯Ø± ÛŒØ§ÙØªÙ† Ù…Ø­ØµÙˆÙ„', 'error');
                return;
            }
            
            // Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ù…Ù‚Ø§Ø¯ÛŒØ± ÙˆØ±ÙˆØ¯ÛŒ
            const inputs = card.querySelectorAll('.dimension-input');
            let multiplier = 1;
            let details = '';
            
            inputs.forEach((input, index) => {
                const value = parseFloat(input.value) || 0;
                if (value > 0) {
                    if (selectedProduct === 'Ø¯Ø±Ø§ÙˆØ±') {
                        multiplier = value;
                        details = `ØªØ¹Ø¯Ø§Ø¯ Ú©Ø´Ùˆ: ${value}`;
                    } else {
                        multiplier *= value;
                        details += `${product.inputs[index]}: ${value} `;
                    }
                }
            });
            
            if (multiplier <= 0) {
                showNotification('Ù„Ø·ÙØ§ Ù…Ù‚Ø§Ø¯ÛŒØ± Ù…Ø¹ØªØ¨Ø± ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            
            // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª
            const basePrice = shopData.prices[selectedProduct]?.[selectedMaterial] || 0;
            const finalPrice = Math.round(basePrice * multiplier);
            
            // Ù†Ù…Ø§ÛŒØ´ Ù†ØªÛŒØ¬Ù‡
            document.getElementById('finalPrice').textContent = finalPrice.toLocaleString('fa-IR');
            document.getElementById('priceDetails').textContent = 
                `${selectedProduct} | Ø¬Ù†Ø³: ${selectedMaterial} | ${details}`;
            
            showNotification(`Ù‚ÛŒÙ…Øª Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø´Ø¯: ${finalPrice.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†`);
        }

        // ==================== Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ GitHub ====================
        function saveGitHubConfig() {
            const owner = document.getElementById('repoOwner').value.trim();
            const repo = document.getElementById('repoName').value.trim();
            const token = document.getElementById('githubToken').value.trim();
            
            // Ø§Ú¯Ø± ØªÙˆÚ©Ù† Ù‚Ø¨Ù„Ø§Ù‹ Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡
            const currentToken = githubConfig.token;
            const newToken = token === 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢' ? currentToken : token;
            
            if (!owner || !repo || !newToken) {
                showNotification('Ù„Ø·ÙØ§ Ù‡Ù…Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            
            githubConfig = {
                token: newToken,
                repoOwner: owner,
                repoName: repo,
                branch: 'main'
            };
            
            localStorage.setItem('githubConfig', JSON.stringify(githubConfig));
            document.getElementById('githubToken').value = 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢';
            
            showNotification('ØªÙ†Ø¸ÛŒÙ…Ø§Øª GitHub Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯', 'success');
        }

        async function testGitHubConnection() {
            if (!githubConfig.token || !githubConfig.repoOwner) {
                showNotification('Ù„Ø·ÙØ§ Ø§Ø¨ØªØ¯Ø§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª GitHub Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            
            const statusBox = document.getElementById('statusBox');
            const statusText = document.getElementById('statusText');
            
            statusBox.style.display = 'block';
            statusText.textContent = 'ğŸ”„ Ø¯Ø± Ø­Ø§Ù„ ØªØ³Øª Ø§ØªØµØ§Ù„ Ø¨Ù‡ GitHub...\n';
            
            try {
                // ØªØ³Øª Ú©Ø§Ø±Ø¨Ø±
                const userResponse = await fetch('https://api.github.com/user', {
                    headers: {
                        'Authorization': `token ${githubConfig.token}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });
                
                if (!userResponse.ok) throw new Error('ØªÙˆÚ©Ù† Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª');
                
                const userData = await userResponse.json();
                statusText.textContent += `âœ… Ú©Ø§Ø±Ø¨Ø±: ${userData.login}\n`;
                
                // ØªØ³Øª Ø±ÛŒÙ¾Ø§Ø²ÛŒØªÙˆØ±ÛŒ
                const repoResponse = await fetch(
                    `https://api.github.com/repos/${githubConfig.repoOwner}/${githubConfig.repoName}`,
                    {
                        headers: {
                            'Authorization': `token ${githubConfig.token}`,
                            'Accept': 'application/vnd.github.v3+json'
                        }
                    }
                );
                
                if (repoResponse.ok) {
                    statusText.textContent += 'âœ… Ø±ÛŒÙ¾Ø§Ø²ÛŒØªÙˆØ±ÛŒ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯\n';
                } else if (repoResponse.status === 404) {
                    statusText.textContent += 'âš  Ø±ÛŒÙ¾Ø§Ø²ÛŒØªÙˆØ±ÛŒ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯ (Ù…ÙˆÙ‚Ø¹ Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ Ø³Ø§Ø®ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯)\n';
                } else {
                    throw new Error(`Ø®Ø·Ø§ÛŒ Ø±ÛŒÙ¾Ø§Ø²ÛŒØªÙˆØ±ÛŒ: ${repoResponse.status}`);
                }
                
                statusText.textContent += '\nâœ… Ù‡Ù…Ù‡ ØªØ³Øªâ€ŒÙ‡Ø§ Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯Ù†Ø¯!';
                showNotification('Ø§ØªØµØ§Ù„ Ø¨Ù‡ GitHub Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯', 'success');
                
            } catch (error) {
                statusText.textContent += `\nâŒ Ø®Ø·Ø§: ${error.message}`;
                showNotification(`Ø®Ø·Ø§: ${error.message}`, 'error');
            }
        }

        async function syncToGitHub() {
            if (!githubConfig.token || !githubConfig.repoOwner) {
                showNotification('Ù„Ø·ÙØ§ Ø§Ø¨ØªØ¯Ø§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª GitHub Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            
            const statusBox = document.getElementById('statusBox');
            const statusText = document.getElementById('statusText');
            
            statusBox.style.display = 'block';
            statusText.textContent = 'ğŸ”„ Ø´Ø±ÙˆØ¹ Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ...\n';
            
            try {
                // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ØªØ§Ø±ÛŒØ®
                shopData.lastSync = new Date().toISOString();
                saveShopData();
                
                // ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Base64
                const contentBase64 = btoa(unescape(encodeURIComponent(JSON.stringify(shopData, null, 2))));
                
                // Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¬ÙˆØ¯ ÙØ§ÛŒÙ„
                let sha = null;
                try {
                    const fileCheck = await fetch(
                        `https://api.github.com/repos/${githubConfig.repoOwner}/${githubConfig.repoName}/contents/shop-data.json`,
                        {
                            headers: {
                                'Authorization': `token ${githubConfig.token}`,
                                'Accept': 'application/vnd.github.v3+json'
                            }
                        }
                    );
                    
                    if (fileCheck.ok) {
                        const fileInfo = await fileCheck.json();
                        sha = fileInfo.sha;
                        statusText.textContent += 'ğŸ“„ ÙØ§ÛŒÙ„ Ù…ÙˆØ¬ÙˆØ¯ Ø§Ø³Øª (Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯)\n';
                    }
                } catch {
                    statusText.textContent += 'ğŸ“„ ÙØ§ÛŒÙ„ Ø¬Ø¯ÛŒØ¯ Ø³Ø§Ø®ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯\n';
                }
                
                // Ø¢Ù¾Ù„ÙˆØ¯ ÙØ§ÛŒÙ„
                statusText.textContent += 'â¬† Ø¯Ø± Ø­Ø§Ù„ Ø¢Ù¾Ù„ÙˆØ¯ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§...\n';
                
                const uploadResponse = await fetch(
                    `https://api.github.com/repos/${githubConfig.repoOwner}/${githubConfig.repoName}/contents/shop-data.json`,
                    {
                        method: 'PUT',
                        headers: {
                            'Authorization': `token ${githubConfig.token}`,
                            'Accept': 'application/vnd.github.v3+json',
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            message: `Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ ÙØ±ÙˆØ´Ú¯Ø§Ù‡ - ${new Date().toLocaleString('fa-IR')}`,
                            content: contentBase64,
                            sha: sha,
                            branch: githubConfig.branch
                        })
                    }
                );
                
                if (!uploadResponse.ok) {
                    const errorData = await uploadResponse.json();
                    throw new Error(errorData.message || 'Ø®Ø·Ø§ÛŒ Ù†Ø§Ø´Ù†Ø§Ø®ØªÙ‡');
                }
                
                statusText.textContent += 'âœ… Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ Ù…ÙˆÙÙ‚ÛŒØªâ€ŒØ¢Ù…ÛŒØ² Ø¨ÙˆØ¯!\n';
                statusText.textContent += `ğŸ• Ø²Ù…Ø§Ù†: ${new Date().toLocaleString('fa-IR')}\n`;
                statusText.textContent += `ğŸ“Š ØªØ¹Ø¯Ø§Ø¯ Ù…Ø­ØµÙˆÙ„Ø§Øª: ${shopData.products.length}`;
                
                showNotification('Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¯Ø± GitHub Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù†Ø¯', 'success');
                
            } catch (error) {
                statusText.textContent += `\nâŒ Ø®Ø·Ø§: ${error.message}`;
                showNotification(`Ø®Ø·Ø§ Ø¯Ø± Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ: ${error.message}`, 'error');
            }
        }

        async function loadFromGitHub() {
            if (!githubConfig.token || !githubConfig.repoOwner) {
                showNotification('Ù„Ø·ÙØ§ Ø§Ø¨ØªØ¯Ø§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª GitHub Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯', 'error');
                return;
            }
            
            const statusBox = document.getElementById('statusBox');
            const statusText = document.getElementById('statusText');
            
            statusBox.style.display = 'block';
            statusText.textContent = 'ğŸ“¥ Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø² GitHub...\n';
            
            try {
                const response = await fetch(
                    `https://api.github.com/repos/${githubConfig.repoOwner}/${githubConfig.repoName}/contents/shop-data.json`,
                    {
                        headers: {
                            'Authorization': `token ${githubConfig.token}`,
                            'Accept': 'application/vnd.github.v3+json'
                        }
                    }
                );
                
                if (!response.ok) {
                    if (response.status === 404) {
                        throw new Error('ÙØ§ÛŒÙ„ shop-data.json ÛŒØ§ÙØª Ù†Ø´Ø¯. Ø§Ø¨ØªØ¯Ø§ Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ Ú©Ù†ÛŒØ¯.');
                    }
                    throw new Error(`Ø®Ø·Ø§ÛŒ ${response.status}`);
                }
                
                const fileData = await response.json();
                const decodedContent = decodeURIComponent(escape(atob(fileData.content)));
                const loadedData = JSON.parse(decodedContent);
                
                // Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ùˆ Ø°Ø®ÛŒØ±Ù‡
                if (loadedData.products && loadedData.prices) {
                    shopData = loadedData;
                    saveShopData();
                    renderAll();
                    
                    statusText.textContent += 'âœ… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯Ù†Ø¯\n';
                    statusText.textContent += `ğŸ“Š ØªØ¹Ø¯Ø§Ø¯ Ù…Ø­ØµÙˆÙ„Ø§Øª: ${shopData.products.length}\n`;
                    if (shopData.lastSync) {
                        statusText.textContent += `ğŸ• Ø¢Ø®Ø±ÛŒÙ† Ù‡Ù…Ú¯Ø§Ù…â€ŒØ³Ø§Ø²ÛŒ: ${new Date(shopData.lastSync).toLocaleString('fa-IR')}`;
                    }
                    
                    showNotification('Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø§Ø² GitHub Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯Ù†Ø¯', 'success');
                } else {
                    throw new Error('ÙØ±Ù…Øª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª');
                }
                
            } catch (error) {
                statusText.textContent += `\nâŒ Ø®Ø·Ø§: ${error.message}`;
                showNotification(`Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ: ${error.message}`, 'error');
            }
        }

        function exportLocalBackup() {
            const dataStr = JSON.stringify(shopData, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `shop-backup-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            showNotification('ÙØ§ÛŒÙ„ Ù¾Ø´ØªÛŒØ¨Ø§Ù† Ø¯Ø§Ù†Ù„ÙˆØ¯ Ø´Ø¯', 'success');
        }

        // ==================== Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ ====================
        function setupEventListeners() {
            // ØªØ¨â€ŒÙ‡Ø§
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.tab-btn, .tab-content').forEach(el => {
                        el.classList.remove('active');
                    });
                    btn.classList.add('active');
                    document.getElementById(btn.dataset.tab).classList.add('active');
                    
                    // Ù‡Ù†Ú¯Ø§Ù… ØªØºÛŒÛŒØ± ØªØ¨ØŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø±Ù†Ø¯Ø± Ú©Ù†
                    if (btn.dataset.tab === 'calculate') {
                        renderProductCards();
                    } else if (btn.dataset.tab === 'products') {
                        renderProductsList();
                    } else if (btn.dataset.tab === 'prices') {
                        renderPriceTable();
                    }
                });
            });
            
            // Enter Ø¯Ø± ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ ÙˆØ±ÙˆØ¯ÛŒ
            document.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    if (e.target.type === 'text' || e.target.type === 'number') {
                        e.preventDefault();
                        if (document.getElementById('calculate').classList.contains('active')) {
                            calculatePrice();
                        }
                    }
                }
            });
        }

        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }

        // ==================== Ø§Ø¬Ø±Ø§ ====================
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
